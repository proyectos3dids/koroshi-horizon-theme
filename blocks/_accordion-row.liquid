
{% assign block_settings = block.settings %}


<accordion-custom
  {% if block.settings.open_by_default %}
    open-by-default-on-desktop
    open-by-default-on-mobile
  {% endif %}
>
  <details
    class="details"
    {{ block.shopify_attributes }}
    {% if block.settings.open_by_default %}open{% endif %}
  >
    <summary class="details__header">
      {{ block.settings.heading }}

      <!-- Iconos estado -->
      <img class="accordion-iconc  accordion-icon accordion-icon--closed"
           src="https://cdn.shopify.com/s/files/1/0922/7858/7767/files/add_1.svg?v=1758185927"
           alt="{{ 'actions.open' | t | default: 'Abrir' }}"
           width="16" height="6" loading="lazy">

      <img class="accordion-iconc accordion-icon accordion-icon--open"
           src="https://cdn.shopify.com/s/files/1/0922/7858/7767/files/Frame_3091.svg?v=1758185947"
           alt="{{ 'actions.close' | t | default: 'Cerrar' }}"
           width="16" height="6" loading="lazy">
    </summary>

    <div class="details-content">
      {% content_for 'blocks' %}
    </div>
  </details>
</accordion-custom>

{% stylesheet %}
  .details__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: .5rem;
    cursor: pointer;
  }

  .accordion-icon {
    display: inline-block;
    flex: 0 0 auto;
    width: 15px;
    height: 15px;
  }

  /* Por defecto: mostrar icono de cerrado */
  .details .accordion-icon--closed { display: inline-block; }
  .details .accordion-icon--open   { display: none; }

  /* Cuando est√° abierto, invertir iconos */
  .details[open] .accordion-icon--closed { display: none; }
  .details[open] .accordion-icon--open   { display: inline-block; }
{% endstylesheet %}


{% schema %}
{
  "name": "t:names.accordion_row",
  "tag": null,
  "blocks": [
    {
      "type": "@theme"
    },
    {
      "type": "@app"
    }
  ],
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "t:settings.heading",
      "default": "t:text_defaults.accordion_heading"
    },
    {
      "type": "checkbox",
      "id": "open_by_default",
      "label": "t:settings.open_row_by_default",
      "default": false
    }
  ],
  "presets": [
    {
      "name": "t:names.accordion_row",
      "blocks": {
        "text-1": {
          "type": "text",
          "settings": {
            "text": "<p>We will work quickly to ship your order as soon as possible. Once your order has shipped, you will receive an email with further information. Delivery times vary depending on your location.</p>",
            "width": "100%"
          }
        }
      },
      "block_order": ["text-1"],
      "settings": {
        "heading": "When will I get my order?"
      }
    }
  ]
}
{% endschema %}
